# Beta 0.1.6

add_namespace = ww1_armistice


# Germany Surrend - Trigger to the GER
#____________________________________________________________
country_event = {
	id = ww1_armistice.3
	title = ww1_armistice.3.t
	desc = ww1_armistice.3.d
	picture = GFX_report_event_generic_read_write

	fire_only_once = yes

	mean_time_to_happen = {
		days = 0
	}

	trigger = {
		TAG = GER
		GER = {
			surrender_progress > 0.55
			has_war_with = ENG
			has_war_with = FRA

			has_global_flag = kis_brestlitovsk # Open Beta 0.1.8 - Temporary Solution
			
			NOT = {
				has_global_flag = kis_ask_ger_surrend #
			}
		}
	}

	immediate = {
		set_global_flag = kis_ask_ger_surrend
	}

	option = {
		name = ww1_armistice.3.a
		ai_chance = { factor = 100 }

		hidden_effect = {

			#Dirty Code but only way for now...
			GER = { white_peace = FRA }
			GER = { white_peace = ENG }
			GER = { white_peace = RUS }
			GER = { white_peace = SOV }
			GER = { white_peace = HOL }
			GER = { white_peace = BEL }
			GER = { white_peace = ITA }
			GER = { white_peace = LUX }
			GER = { white_peace = MTN }
			GER = { white_peace = SER }
			GER = { white_peace = BUL }
			GER = { white_peace = TUR }
			GER = { white_peace = GRE }
			GER = { white_peace = JAP }
			GER = { white_peace = USA }
			GER = { white_peace = ROM }
			GER = { white_peace = CHI }
			GER = { white_peace = QIN }

			GER = {	diplomatic_relation = {	country = FRA relation = non_aggression_pact } }
			GER = {	diplomatic_relation = {	country = ENG relation = non_aggression_pact } }
			GER = {	diplomatic_relation = {	country = RUS relation = non_aggression_pact } }
			GER = {	diplomatic_relation = {	country = HOL relation = non_aggression_pact } }
			GER = {	diplomatic_relation = {	country = BEL relation = non_aggression_pact } }
			GER = {	diplomatic_relation = {	country = ITA relation = non_aggression_pact } }
			GER = {	diplomatic_relation = {	country = LUX relation = non_aggression_pact } }
			GER = {	diplomatic_relation = {	country = MTN relation = non_aggression_pact } }
			GER = {	diplomatic_relation = {	country = SER relation = non_aggression_pact } }
			GER = {	diplomatic_relation = {	country = BUL relation = non_aggression_pact } }
			GER = {	diplomatic_relation = {	country = TUR relation = non_aggression_pact } }
			GER = {	diplomatic_relation = {	country = GRE relation = non_aggression_pact } }
			GER = {	diplomatic_relation = {	country = JAP relation = non_aggression_pact } }
			GER = {	diplomatic_relation = {	country = USA relation = non_aggression_pact } }
			GER = {	diplomatic_relation = {	country = ROM relation = non_aggression_pact } }
			GER = {	diplomatic_relation = {	country = CHI relation = non_aggression_pact } }
			GER = {	diplomatic_relation = {	country = QIN relation = non_aggression_pact } }

			AUH = { white_peace = FRA }
			AUH = { white_peace = ENG }
			AUH = { white_peace = RUS }
			AUH = { white_peace = SOV }
			AUH = { white_peace = HOL }
			AUH = { white_peace = BEL }
			AUH = { white_peace = ITA }
			AUH = { white_peace = LUX }
			AUH = { white_peace = MTN }
			AUH = { white_peace = SER }
			AUH = { white_peace = BUL }
			AUH = { white_peace = TUR }
			AUH = { white_peace = GRE }
			AUH = { white_peace = JAP }
			AUH = { white_peace = USA }
			AUH = { white_peace = ROM }
			AUH = { white_peace = CHI }
			AUH = { white_peace = QIN }

			AUH = {	diplomatic_relation = {	country = FRA relation = non_aggression_pact } }
			AUH = {	diplomatic_relation = {	country = ENG relation = non_aggression_pact } }
			AUH = {	diplomatic_relation = {	country = RUS relation = non_aggression_pact } }
			AUH = {	diplomatic_relation = {	country = HOL relation = non_aggression_pact } }
			AUH = {	diplomatic_relation = {	country = BEL relation = non_aggression_pact } }
			AUH = {	diplomatic_relation = {	country = ITA relation = non_aggression_pact } }
			AUH = {	diplomatic_relation = {	country = LUX relation = non_aggression_pact } }
			AUH = {	diplomatic_relation = {	country = MTN relation = non_aggression_pact } }
			AUH = {	diplomatic_relation = {	country = SER relation = non_aggression_pact } }
			AUH = {	diplomatic_relation = {	country = BUL relation = non_aggression_pact } }
			AUH = {	diplomatic_relation = {	country = TUR relation = non_aggression_pact } }
			AUH = {	diplomatic_relation = {	country = GRE relation = non_aggression_pact } }
			AUH = {	diplomatic_relation = {	country = JAP relation = non_aggression_pact } }
			AUH = {	diplomatic_relation = {	country = USA relation = non_aggression_pact } }
			AUH = {	diplomatic_relation = {	country = ROM relation = non_aggression_pact } }
			AUH = {	diplomatic_relation = {	country = CHI relation = non_aggression_pact } }
			AUH = {	diplomatic_relation = {	country = QIN relation = non_aggression_pact } }

			GER = {
				remove_from_faction = AUH
				remove_from_faction = BUL
				remove_from_faction = ROM
				remove_from_faction = ITA
				remove_from_faction = MEX
				remove_from_faction = SWE
				remove_from_faction = GER
			}

			HUN = {
				transfer_state = 43
				transfer_state = 155
				transfer_state = 154

                kill_country_leader = yes
                create_country_leader={ name = "Miklós Horthy" desc=HUN_miklos_horothy_DESC picture="gfx/leaders/HUN_miklos_horthy.dds" expire="1935.1.1" ideology=despotism traits={  } }

			}

			CZE = {
				transfer_state = 69
				transfer_state = 9		
				transfer_state = 75		
				transfer_state = 74		
				transfer_state = 70		
				transfer_state = 72		
			}

			SWI = {
				transfer_state = 3
				transfer_state = 151		
			}

			BEL = {
				transfer_state = 768
				transfer_state = 6
				transfer_state = 34
			}

			HOL = {
				transfer_state = 35
				transfer_state = 7			
				transfer_state = 36			
			}	

			news_event = { days = 3 id = ww1_armistice.1 }
		}
	}
}
#____________________________________________________________


# Armistice
#____________________________________________________________
news_event = {
	id = ww1_armistice.1
	title = ww1_armistice.1.t
	desc = ww1_armistice.1.d
	picture = EVENT_hoi4tgw_armistice

	major = yes
	is_triggered_only = yes

	# GER Accepts - The German Empire fall and Democratic Germany is
	option = {
		name = ww1_armistice.1.a
		ai_chance = { factor = 100 }

		hidden_effect = {

			add_named_threat = {
				threat = -15
				name = "The Great War Armistice"
			}
			GER = {
				set_politics = {
				    parties = {
				        neutrality = {
				            popularity = 10
				        }
				        fascism = {
				            popularity = 5
				        }
				        democratic = {
				            popularity = 80
				        }
				        communism = {
				            popularity = 5
				        }
				    }
				    ruling_party = democratic last_election = "1911.7.1"
				    election_frequency = 48 elections_allowed = yes
				}
			}

			FRA = {
				transfer_state = 28
				transfer_state = 553
				transfer_state = 667
				transfer_state = 554
				transfer_state = 680
				transfer_state = 677
			}					

			ROM = {
				transfer_state = 80
				transfer_state = 79
				transfer_state = 46
				transfer_state = 77
				transfer_state = 81
				transfer_state = 82
				transfer_state = 83
				transfer_state = 84
				transfer_state = 76
			}

			ITA = {
				transfer_state = 39
				transfer_state = 736
			}	

			SER = {
				transfer_state = 107
				transfer_state = 108
				transfer_state = 760
				transfer_state = 106
				transfer_state = 759
				transfer_state = 104
				transfer_state = 103
				transfer_state = 109
				if = {
					limit = {
						MTN = {
							is_ai = yes
						}
					}
					transfer_state = 105
					transfer_state = 761
				}
				country_event = { days = 1 id = ww1_armistice.101 }
			}

			ENG = {
				transfer_state = 656
				transfer_state = 675
				transfer_state = 291
				transfer_state = 676
				transfer_state = 455
				transfer_state = 454
			}

			SAU = {
				transfer_state = 747
			}

			POL = {
				transfer_state = 85
				transfer_state = 86
				transfer_state = 87
				transfer_state = 98
				transfer_state = 10
				transfer_state = 90
			}

			AUH = {
				drop_cosmetic_tag = yes # Open Beta 0.1.8
				transfer_state = 153
				transfer_state = 152
				transfer_state = 4
				country_event = { days = 1 id = ww1_armistice.100 }
			}

			LUX = {
				transfer_state = 8
			}

			news_event = { days = 3 id = ww1_armistice.2 }
		}
	}
}
#____________________________________________________________


# Treaty of Versailles 
#____________________________________________________________
news_event = {
	id = ww1_armistice.2
	title = ww1_armistice.2.t
	desc = ww1_armistice.2.d
	picture = EVENT_hoi4tgw_treaty_of_versailles

	major = yes
	is_triggered_only = yes

	immediate = {
		set_global_flag = kis_treaty_of_versailles
		hidden_effect = {
			DEN = {
				transfer_state = 751
			}

			CZE = {
				transfer_state = 664
				transfer_state = 73
				transfer_state = 71
			}

			ROM = {
				transfer_state = 78
			}

			ITA = {
				transfer_state = 163
			}

			SER = {
				transfer_state = 102
				transfer_state = 45
			}

			ENG = {
				transfer_state = 770
				transfer_state = 546
				transfer_state = 725
			}

			FRA = {
				transfer_state = 769
				transfer_state = 539
				transfer_state = 755
			}

			SAF = {
				transfer_state = 541
			}

			AST = {
				transfer_state = 523
				transfer_state = 737
			}

			JAP = {
				transfer_state = 684
				transfer_state = 646
				transfer_state = 648
				transfer_state = 633
				transfer_state = 647
			}

			EST = {
				transfer_state = 13
				transfer_state = 191
			}

			LAT = {
				transfer_state = 12
				transfer_state = 190
			}

			LIT = {
				transfer_state = 189
				transfer_state = 188
				transfer_state = 11
			}

			GRE = {
				transfer_state = 184
				transfer_state = 757
			}

			POL = {
				transfer_state = 90
				transfer_state = 89
				transfer_state = 88
				transfer_state = 92
				transfer_state = 91
				transfer_state = 93
				transfer_state = 94
				transfer_state = 97
				transfer_state = 95
				transfer_state = 96
			}
		}
	}

	option = {
		name = ww1_armistice.2.a
		ai_chance = { factor = 100 }
	}
}
#____________________________________________________________

# AUH - AUH needs to change itself it politics in order to have the right name on map
#____________________________________________________________
country_event = {
	id = ww1_armistice.100
	title = ww1_armistice.100.t
	desc = ww1_armistice.100.d
	picture = GFX_report_event_generic_read_write

	fire_only_once = yes
	is_triggered_only = yes

	immediate = {
		hidden_effect = {

			# The Entente is dead after the Great War ### OPEN BETA 0.1.6
			ENG = {
				remove_from_faction = USA
				remove_from_faction = RUS
				remove_from_faction = JAP
				remove_from_faction = ROM
				remove_from_faction = SER
				remove_from_faction = LUX
				remove_from_faction = HOL
				remove_from_faction = GRE
				remove_from_faction = POL
				remove_from_faction = DEN
				remove_from_faction = BEL
				remove_from_faction = POR
				remove_from_faction = SPR
			}

			AUH = {
			#	kill_country_leader = yes
			#	create_country_leader = {
			#		name = "Kurt Schuschnigg"
			#		desc = "POLITICS_KURT_SCHUSCHNIGG_DESC"
			#		picture = "Portrait_Austria_Kurt_Schuschnigg.dds"
			#		expire = "1965.1.1"
			#		ideology = conservatism
			#		traits = { }
			#	}
				set_politics = {
				    parties = {
				        neutrality = {
				            popularity = 10
				        }
				        fascism = {
				            popularity = 5
				        }
				        democratic = {
				            popularity = 80
				        }
				        communism = {
				            popularity = 5
				        }
				    }
				    ruling_party = democratic last_election = "1911.7.1"
				    election_frequency = 48 elections_allowed = yes
				}
			}
		}
	}

	option = {
		name = ww1_armistice.100.a
		ai_chance = { factor = 100 }

	}
}
#____________________________________________________________

# SER - SER needs to change itself it politics in order to have the right name on map
#____________________________________________________________
country_event = {
	id = ww1_armistice.101
	title = ww1_armistice.101.t
	desc = ww1_armistice.101.d
	picture = GFX_report_event_generic_read_write

	fire_only_once = yes
	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			# Set Correct Country Tag and Name with the TFV
		}
	}

	option = {
		name = ww1_armistice.101.a
		ai_chance = { factor = 100 }

	}
}
#____________________________________________________________
# Entente Surrender - Trigger to the FRA
#____________________________________________________________
country_event = {
	id = ww1_armistice.4
	title = ww1_armistice.4.t
	desc = ww1_armistice.4.d
	picture = GFX_report_event_generic_read_write

	fire_only_once = yes

	mean_time_to_happen = {
		days = 0
	}

	trigger = {
		TAG = FRA
		FRA = {
			surrender_progress > 0.55
			has_war_with = GER
			has_war_with = AUH

			
			NOT = {
				has_global_flag = kis_ask_fra_surrend #
			}
		}
	}

	immediate = {
		set_global_flag = kis_ask_fra_surrend
	}

	option = {
		name = ww1_armistice.4.a
		ai_chance = { factor = 100 }

		hidden_effect = {

			#Dirty Code but only way for now...
			GER = { white_peace = FRA }
			GER = { white_peace = ENG }
			GER = { white_peace = RUS }
			GER = { white_peace = SOV }
			GER = { white_peace = HOL }
			GER = { white_peace = BEL }
			GER = { white_peace = ITA }
			GER = { white_peace = LUX }
			GER = { white_peace = MTN }
			GER = { white_peace = SER }
			GER = { white_peace = BUL }
			GER = { white_peace = TUR }
			GER = { white_peace = GRE }
			GER = { white_peace = JAP }
			GER = { white_peace = USA }
			GER = { white_peace = ROM }
			GER = { white_peace = CHI }
			GER = { white_peace = QIN }

			GER = {	diplomatic_relation = {	country = FRA relation = non_aggression_pact } }
			GER = {	diplomatic_relation = {	country = ENG relation = non_aggression_pact } }
			GER = {	diplomatic_relation = {	country = RUS relation = non_aggression_pact } }
			GER = {	diplomatic_relation = {	country = HOL relation = non_aggression_pact } }
			GER = {	diplomatic_relation = {	country = BEL relation = non_aggression_pact } }
			GER = {	diplomatic_relation = {	country = ITA relation = non_aggression_pact } }
			GER = {	diplomatic_relation = {	country = LUX relation = non_aggression_pact } }
			GER = {	diplomatic_relation = {	country = MTN relation = non_aggression_pact } }
			GER = {	diplomatic_relation = {	country = SER relation = non_aggression_pact } }
			GER = {	diplomatic_relation = {	country = BUL relation = non_aggression_pact } }
			GER = {	diplomatic_relation = {	country = TUR relation = non_aggression_pact } }
			GER = {	diplomatic_relation = {	country = GRE relation = non_aggression_pact } }
			GER = {	diplomatic_relation = {	country = JAP relation = non_aggression_pact } }
			GER = {	diplomatic_relation = {	country = USA relation = non_aggression_pact } }
			GER = {	diplomatic_relation = {	country = ROM relation = non_aggression_pact } }
			GER = {	diplomatic_relation = {	country = CHI relation = non_aggression_pact } }
			GER = {	diplomatic_relation = {	country = QIN relation = non_aggression_pact } }

			AUH = { white_peace = FRA }
			AUH = { white_peace = ENG }
			AUH = { white_peace = RUS }
			AUH = { white_peace = SOV }
			AUH = { white_peace = HOL }
			AUH = { white_peace = BEL }
			AUH = { white_peace = ITA }
			AUH = { white_peace = LUX }
			AUH = { white_peace = MTN }
			AUH = { white_peace = SER }
			AUH = { white_peace = BUL }
			AUH = { white_peace = TUR }
			AUH = { white_peace = GRE }
			AUH = { white_peace = JAP }
			AUH = { white_peace = USA }
			AUH = { white_peace = ROM }
			AUH = { white_peace = CHI }
			AUH = { white_peace = QIN }

			AUH = {	diplomatic_relation = {	country = FRA relation = non_aggression_pact } }
			AUH = {	diplomatic_relation = {	country = ENG relation = non_aggression_pact } }
			AUH = {	diplomatic_relation = {	country = RUS relation = non_aggression_pact } }
			AUH = {	diplomatic_relation = {	country = HOL relation = non_aggression_pact } }
			AUH = {	diplomatic_relation = {	country = BEL relation = non_aggression_pact } }
			AUH = {	diplomatic_relation = {	country = ITA relation = non_aggression_pact } }
			AUH = {	diplomatic_relation = {	country = LUX relation = non_aggression_pact } }
			AUH = {	diplomatic_relation = {	country = MTN relation = non_aggression_pact } }
			AUH = {	diplomatic_relation = {	country = SER relation = non_aggression_pact } }
			AUH = {	diplomatic_relation = {	country = BUL relation = non_aggression_pact } }
			AUH = {	diplomatic_relation = {	country = TUR relation = non_aggression_pact } }
			AUH = {	diplomatic_relation = {	country = GRE relation = non_aggression_pact } }
			AUH = {	diplomatic_relation = {	country = JAP relation = non_aggression_pact } }
			AUH = {	diplomatic_relation = {	country = USA relation = non_aggression_pact } }
			AUH = {	diplomatic_relation = {	country = ROM relation = non_aggression_pact } }
			AUH = {	diplomatic_relation = {	country = CHI relation = non_aggression_pact } }
			AUH = {	diplomatic_relation = {	country = QIN relation = non_aggression_pact } }

			# The Entente is dead after defeat in Great War
			ENG = {
				remove_from_faction = USA
				remove_from_faction = RUS
				remove_from_faction = JAP
				remove_from_faction = ROM
				remove_from_faction = SER
				remove_from_faction = LUX
				remove_from_faction = HOL
				remove_from_faction = GRE
				remove_from_faction = POL
				remove_from_faction = DEN
				remove_from_faction = BEL
				remove_from_faction = POR
				remove_from_faction = SPR
				remove_from_faction = FRA
				remove_from_faction = RAJ
				remove_from_faction = CAN
			}
			GER = {
				transfer_state = 8
				transfer_state = 98
				transfer_state = 87
				transfer_state = 90
				transfer_state = 10
			}
			AUH = {
				transfer_state = 160
				transfer_state = 159
				transfer_state = 158
				transfer_state = 161
				transfer_state = 105
				transfer_state = 761
			}
			TUR = {
				transfer_state = 453
				transfer_state = 446
				transfer_state = 447
				transfer_state = 452
				transfer_state = 273
				transfer_state = 663
				transfer_state = 451
				transfer_state = 450
				transfer_state = 449
				transfer_state = 448
				transfer_state = 661
				transfer_state = 662
			}
		news_event = { days = 3 id = ww1_armistice.5 }
					
		}
	}
}
news_event = {
	id = ww1_armistice.5
	title = ww1_armistice.5.t
	desc = ww1_armistice.5.d
	picture = EVENT_hoi4tgw_treaty_of_versailles

	major = yes
	is_triggered_only = yes

	immediate = {
		set_global_flag = kis_treaty_of_berlin
		hidden_effect = {
			GER = {
				transfer_state = 545
				transfer_state = 542
				transfer_state = 763
				transfer_state = 718
				transfer_state = 538
				transfer_state = 336
				transfer_state = 539
			}
			AUH = {
				transfer_state = 458
				transfer_state = 665
				transfer_state = 460
				transfer_state = 513
				transfer_state = 459
				transfer_state = 719
				transfer_state = 275
				transfer_state = 295
				transfer_state = 333
			}
			TUR = {
				transfer_state = 671
				transfer_state = 286
			}
			LAO = {
				transfer_state = 670
			}
			CAM = {
				transfer_state = 741
			}
			set_autonomy = { target = RAJ autonomy_state = autonomy_free } 
			set_autonomy = { target = CAN autonomy_state = autonomy_free }
		}
	}
}
#____________________________________________________________
